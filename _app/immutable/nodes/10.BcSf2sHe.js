import"../chunks/DsnmJJEf.js";import{o as Ye}from"../chunks/ChZCaD_0.js";import{t as k,B as Ce,D as Ee,a6 as Ge,aI as We,K as Le,L as Xe,a2 as Ze,aJ as ea,aK as aa,aw as Te,A as ta,av as ra,C as ie,p as sa,s as O,b as ia,f as _,h as oa,g as e,a as i,c as da,$ as la,k as s,e as t,d as u,r as a,n as na,m as va,i as W,j as X,aL as ca}from"../chunks/BYlZn5Gg.js";import{d as ua,e as fa,s as y}from"../chunks/DDMNtiwy.js";import{i as w}from"../chunks/hdWpqC_S.js";import{e as Z,i as ee}from"../chunks/CwB9K-AB.js";import{r as ma,s as xe}from"../chunks/5tjEvnQD.js";import{s as _a}from"../chunks/C2oAtzVi.js";import{b as ga}from"../chunks/D5r4ZAsc.js";import{b as pa}from"../chunks/DL4Sxb5u.js";import{s as ha,a as xa}from"../chunks/Cv1_MIr9.js";import{p as ba}from"../chunks/BEWcXL-h.js";function be(N,j,p=!1,K=!1,ye=!1){var m=N,S="";k(()=>{var l=Ge;if(S===(S=j()??"")){Ce&&Ee();return}if(l.nodes_start!==null&&(We(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),S!==""){if(Ce){Le.data;for(var c=Ee(),M=c;c!==null&&(c.nodeType!==Xe||c.data!=="");)M=c,c=Ze(c);if(c===null)throw ea(),aa;Te(Le,M),m=ta(c);return}var n=S+"";p?n=`<svg>${n}</svg>`:K&&(n=`<math>${n}</math>`);var f=ra(n);if((p||K)&&(f=ie(f)),Te(ie(f),f.lastChild),p||K)for(;ie(f);)m.before(ie(f));else m.before(f)}})}const ya=!0,wa=!0,ka=async()=>({}),Za=Object.freeze(Object.defineProperty({__proto__:null,load:ka,prerender:ya,ssr:wa},Symbol.toStringTag,{value:"Module"}));var Sa=_("<option> </option>"),$a=va('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Da=_('<div class="flex items-center justify-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div></div>'),Pa=_('<div class="bg-red-50 border border-red-200 rounded-md p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800">Search Error</h3> <p class="mt-1 text-sm text-red-700"> </p></div></div></div>'),ja=_('<div class="text-center py-12"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No results found</h3> <p class="mt-1 text-sm text-gray-500">Try adjusting your search terms or search type.</p></div>'),Ma=_('<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"> </span>'),Ca=_('<div class="bg-white rounded-lg shadow p-4"><h3 class="text-lg font-semibold text-gray-900 mb-2"><a class="hover:text-indigo-600"><!></a></h3> <p class="text-gray-600 text-sm mb-2"><!></p> <div class="flex items-center justify-between"><div class="flex items-center space-x-2"><!> <span class="text-xs text-gray-500"> </span></div> <a class="text-gray-500 hover:text-gray-700 text-sm" target="_blank">API</a></div></div>'),Ea=_('<div><h2 class="text-xl font-semibold text-gray-900 mb-4">Datasets</h2> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div>'),La=_('<div class="bg-white rounded-lg shadow p-4"><div class="flex items-start justify-between"><div class="flex-1"><h3 class="text-lg font-semibold text-gray-900 mb-2"><!></h3> <div class="text-sm text-gray-600 mb-2">From: <a class="text-indigo-600 hover:text-indigo-500"> </a></div> <div class="bg-gray-50 rounded p-3 text-sm font-mono"><pre> </pre></div></div> <div class="ml-4 text-xs text-gray-500"> </div></div></div>'),Ta=_('<div><h2 class="text-xl font-semibold text-gray-900 mb-4">Data Entries</h2> <div class="space-y-4"></div></div>'),Ra=(N,j,p)=>j(e(p)-1),za=(N,j,p)=>j(e(p)),Aa=_("<button> </button>"),Oa=(N,j,p)=>j(e(p)+1),qa=_('<div class="flex items-center justify-between"><div class="text-sm text-gray-700"> </div> <div class="flex space-x-2"><button class="px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button> <!> <button class="px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Next</button></div></div>'),Ba=_('<div class="space-y-8"><div class="text-sm text-gray-600"> </div> <!> <!> <!></div>'),Na=_('<div class="min-h-screen bg-gray-50"><div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900">Search Data</h1> <p class="mt-2 text-gray-600">Find datasets and data entries across our entire collection</p></div> <div class="bg-white rounded-lg shadow p-6 mb-8"><form class="space-y-4"><div class="flex flex-col md:flex-row gap-4"><div class="flex-1"><label for="search" class="block text-sm font-medium text-gray-700 mb-2">Search Query</label> <input id="search" type="text" placeholder="Enter your search terms..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required/></div> <div class="md:w-64"><label for="type" class="block text-sm font-medium text-gray-700 mb-2">Search Type</label> <select id="type" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></select></div> <div class="flex items-end"><button type="submit" class="w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"><!> Search</button></div></div> <div class="text-sm text-gray-600"></div></form></div> <!></div></div>');function et(N,j){sa(j,!0);const p=()=>xa(ba,"$page",K),[K,ye]=ha();let m=O(""),S=O("all"),l=O(ia({datasets:[],entries:[]})),c=O(!1),M=O(""),n=O(1),f=O(1),we=O(!1);const ke=[{value:"all",label:"All",description:"Search datasets and data entries"},{value:"datasets",label:"Datasets",description:"Search dataset names and descriptions"},{value:"entries",label:"Data Entries",description:"Search within data values"}];Ye(()=>{const r=new URLSearchParams(p().url.search),d=r.get("q"),o=r.get("type");d&&(u(m,d,!0),u(S,o||"all",!0),oe())});async function oe(){if(!e(m).trim()){u(M,"Please enter a search query");return}try{u(c,!0),u(M,""),u(we,!0);const r=new URLSearchParams({q:e(m),type:e(S),page:e(n).toString(),limit:"20"}),o=await(await fetch(`/api/search?${r}`)).json();o.success?(u(l,o.data,!0),u(f,o.data.pagination.totalPages,!0)):u(M,o.error||"Search failed",!0)}catch(r){u(M,"Search failed"),console.error("Search error:",r)}finally{u(c,!1)}}async function Re(){u(n,1),await oe()}async function de(r){u(n,r,!0),await oe()}function ze(r){return new Date(r).toLocaleDateString()}function le(r,d){if(!d)return r;const o=new RegExp(`(${d})`,"gi");return r.replace(o,'<mark class="bg-yellow-200">$1</mark>')}var ne=Na();oa(r=>{la.title="Search - EzeData"});var Se=t(ne),ve=s(t(Se),2),ce=t(ve),ue=t(ce),fe=t(ue),$e=s(t(fe),2);ma($e),a(fe);var me=s(fe,2),_e=s(t(me),2);Z(_e,21,()=>ke,ee,(r,d)=>{var o=Sa(),Q=t(o,!0);a(o);var F={};k(()=>{y(Q,e(d).label),F!==(F=e(d).value)&&(o.value=(o.__value=e(d).value)??"")}),i(r,o)}),a(_e),a(me);var De=s(me,2),ge=t(De),Ae=t(ge);{var Oe=r=>{var d=$a();i(r,d)};w(Ae,r=>{e(c)&&r(Oe)})}na(),a(ge),a(De),a(ue);var Pe=s(ue,2);Z(Pe,21,()=>ke,ee,(r,d)=>{var o=W(),Q=X(o);{var F=$=>{var q=ca();k(()=>y(q,e(d).description)),i($,q)};w(Q,$=>{e(d).value===e(S)&&$(F)})}i(r,o)}),a(Pe),a(ce),a(ve);var qe=s(ve,2);{var Be=r=>{var d=W(),o=X(d);{var Q=$=>{var q=Da();i($,q)},F=$=>{var q=W(),Ne=X(q);{var Fe=I=>{var H=Pa(),ae=t(H),te=s(t(ae),2),re=s(t(te),2),R=t(re,!0);a(re),a(te),a(ae),a(H),k(()=>y(R,e(M))),i(I,H)},Ie=I=>{var H=W(),ae=X(H);{var te=R=>{var U=ja();i(R,U)},re=R=>{var U=Ba(),pe=t(U),He=t(pe);a(pe);var je=s(pe,2);{var Je=h=>{var x=Ea(),C=s(t(x),2);Z(C,21,()=>e(l).datasets,ee,(V,v)=>{var b=Ca(),E=t(b),D=t(E),z=t(D);be(z,()=>le(e(v).name,e(m))),a(D),a(E);var g=s(E,2),L=t(g);be(L,()=>le(e(v).description||"No description",e(m))),a(g);var A=s(g,2),B=t(A),T=t(B);{var P=Y=>{var G=Ma(),Ve=t(G,!0);a(G),k(()=>y(Ve,e(v).category.name)),i(Y,G)};w(T,Y=>{e(v).category&&Y(P)})}var J=s(T,2),se=t(J);a(J),a(B);var he=s(B,2);a(A),a(b),k(()=>{xe(D,"href",`/datasets/${e(v).slug??""}`),y(se,`v${e(v).version??""}`),xe(he,"href",`/api/datasets/${e(v).id??""}`)}),i(V,b)}),a(C),a(x),i(h,x)};w(je,h=>{e(l).datasets.length>0&&h(Je)})}var Me=s(je,2);{var Ke=h=>{var x=Ta(),C=s(t(x),2);Z(C,21,()=>e(l).entries,ee,(V,v)=>{var b=La(),E=t(b),D=t(E),z=t(D),g=t(z);be(g,()=>le(e(v).key,e(m))),a(z);var L=s(z,2),A=s(t(L)),B=t(A,!0);a(A),a(L);var T=s(L,2),P=t(T),J=t(P,!0);a(P),a(T),a(D);var se=s(D,2),he=t(se,!0);a(se),a(E),a(b),k((Y,G)=>{xe(A,"href",`/datasets/${e(v).dataset.slug??""}`),y(B,e(v).dataset.name),y(J,Y),y(he,G)},[()=>JSON.stringify(e(v).value,null,2),()=>ze(e(v).createdAt)]),i(V,b)}),a(C),a(x),i(h,x)};w(Me,h=>{e(l).entries.length>0&&h(Ke)})}var Qe=s(Me,2);{var Ue=h=>{var x=qa(),C=t(x),V=t(C);a(C);var v=s(C,2),b=t(v);b.__click=[Ra,de,n];var E=s(b,2);Z(E,17,()=>Array.from({length:Math.min(5,e(f))},(z,g)=>Math.max(1,e(n)-2)+g),ee,(z,g)=>{var L=W(),A=X(L);{var B=T=>{var P=Aa();P.__click=[za,de,g];var J=t(P,!0);a(P),k(()=>{_a(P,1,`px-3 py-2 border rounded-md text-sm font-medium ${e(g)===e(n)?"bg-indigo-600 text-white border-indigo-600":"border-gray-300 text-gray-700 hover:bg-gray-50"}`),y(J,e(g))}),i(T,P)};w(A,T=>{e(g)<=e(f)&&T(B)})}i(z,L)});var D=s(E,2);D.__click=[Oa,de,n],a(v),a(x),k(()=>{y(V,`Showing page ${e(n)??""} of ${e(f)??""}`),b.disabled=e(n)===1,D.disabled=e(n)===e(f)}),i(h,x)};w(Qe,h=>{e(f)>1&&h(Ue)})}a(U),k(()=>y(He,`Found ${e(l).datasets.length??""} dataset${e(l).datasets.length!==1?"s":""} 
						and ${e(l).entries.length??""} data entr${e(l).entries.length!==1?"ies":"y"}
						for "${e(m)??""}"`)),i(R,U)};w(ae,R=>{e(l).datasets.length===0&&e(l).entries.length===0?R(te):R(re,!1)},!0)}i(I,H)};w(Ne,I=>{e(M)?I(Fe):I(Ie,!1)},!0)}i($,q)};w(o,$=>{e(c)?$(Q):$(F,!1)})}i(r,d)};w(qe,r=>{e(we)&&r(Be)})}a(Se),a(ne),k(()=>ge.disabled=e(c)),fa("submit",ce,r=>{r.preventDefault(),Re()}),ga($e,()=>e(m),r=>u(m,r)),pa(_e,()=>e(S),r=>u(S,r)),i(N,ne),da(),ye()}ua(["click"]);export{et as component,Za as universal};
