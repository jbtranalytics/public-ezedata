import"../chunks/DsnmJJEf.js";import{o as Ue}from"../chunks/ChZCaD_0.js";import{p as Fe,s as I,b as G,f as m,h as Ye,a as u,c as Ge,$ as Ke,d as v,g as a,e as t,r as e,i as Qe,j as _e,k as r,t as L,l as ye,n as ie}from"../chunks/BYlZn5Gg.js";import{d as Ve,s as k,e as he}from"../chunks/DDMNtiwy.js";import{i as S}from"../chunks/hdWpqC_S.js";import{e as K,i as Q}from"../chunks/CwB9K-AB.js";import{r as V}from"../chunks/5tjEvnQD.js";import{s as We}from"../chunks/C2oAtzVi.js";import{b as H,a as Xe}from"../chunks/D5r4ZAsc.js";import{b as we}from"../chunks/DL4Sxb5u.js";import{a as Ze}from"../chunks/BPD30_7i.js";var $e=m('<div class="flex items-center justify-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div></div>'),et=m('<div class="text-center"><h1 class="text-2xl font-bold text-gray-900 mb-4">Access Denied</h1> <p class="text-gray-600 mb-6">You need to be signed in to access the admin panel.</p> <a href="/signin" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">Sign In</a></div>'),tt=m('<div class="mb-6 bg-red-50 border border-red-200 rounded-md p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800">Error</h3> <div class="mt-2 text-sm text-red-700"><p> </p></div></div></div></div>'),at=m('<div class="mb-6 bg-green-50 border border-green-200 rounded-md p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-green-800">Success</h3> <div class="mt-2 text-sm text-green-700"><p> </p></div></div></div></div>'),rt=(O,P)=>v(P,!0),st=m('<p class="text-gray-500 text-center py-4">No datasets found</p>'),ot=m('<div class="border border-gray-200 rounded-lg p-4"><div class="flex items-center justify-between"><div><h3 class="text-sm font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500"> </p> <div class="mt-1 flex items-center space-x-2"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"> </span> <span class="text-xs text-gray-500"> </span></div></div> <div class="flex items-center space-x-2"><span> </span></div></div></div>'),it=m('<div class="space-y-4"></div>'),dt=(O,P)=>v(P,!0),nt=m('<p class="text-gray-500 text-center py-4">No categories found</p>'),lt=m('<div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg"><div><h3 class="text-sm font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500"> </p></div> <span class="text-xs text-gray-500"> </span></div>'),vt=m('<div class="space-y-3"></div>'),ct=m("<option> </option>"),ut=(O,P)=>v(P,!1),pt=m('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4">Create New Dataset</h3> <form class="space-y-4"><div><label for="dataset-name" class="block text-sm font-medium text-gray-700">Name</label> <input id="dataset-name" type="text" required class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"/></div> <div><label for="dataset-description" class="block text-sm font-medium text-gray-700">Description</label> <textarea id="dataset-description" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea></div> <div><label for="dataset-category" class="block text-sm font-medium text-gray-700">Category</label> <select id="dataset-category" required class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"><option>Select a category</option><!></select></div> <div><label for="dataset-tags" class="block text-sm font-medium text-gray-700">Tags (comma-separated)</label> <input id="dataset-tags" type="text" placeholder="tag1, tag2, tag3" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"/></div> <div class="flex items-center"><input id="dataset-public" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"/> <label for="dataset-public" class="ml-2 block text-sm text-gray-900">Public dataset</label></div> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700">Create</button></div></form></div></div></div>'),mt=m("<option> </option>"),gt=(O,P)=>v(P,!1),ft=m('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4">Create New Category</h3> <form class="space-y-4"><div><label for="category-name" class="block text-sm font-medium text-gray-700">Name</label> <input id="category-name" type="text" required class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"/></div> <div><label for="category-description" class="block text-sm font-medium text-gray-700">Description</label> <textarea id="category-description" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea></div> <div><label for="category-parent" class="block text-sm font-medium text-gray-700">Parent Category (optional)</label> <select id="category-parent" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"><option>No parent category</option><!></select></div> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Cancel</button> <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700">Create</button></div></form></div></div></div>'),bt=m('<div class="mb-8"><h1 class="text-3xl font-bold text-gray-900">Admin Panel</h1> <p class="mt-2 text-gray-600">Manage your curated datasets and categories</p></div> <!> <!> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="bg-white shadow rounded-lg"><div class="px-6 py-4 border-b border-gray-200"><div class="flex items-center justify-between"><h2 class="text-lg font-medium text-gray-900">Datasets</h2> <button class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Dataset</button></div></div> <div class="px-6 py-4"><!></div></div> <div class="bg-white shadow rounded-lg"><div class="px-6 py-4 border-b border-gray-200"><div class="flex items-center justify-between"><h2 class="text-lg font-medium text-gray-900">Categories</h2> <button class="inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Category</button></div></div> <div class="px-6 py-4"><!></div></div></div> <!> <!>',1),xt=m('<div class="min-h-screen bg-gray-50"><div class="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"><!></div></div>');function zt(O,P){Fe(P,!0);let W=I(null),de=I(!0),X=I(G([])),B=I(G([])),U=I(!1),F=I(!1),A=I(""),R=I(""),g=I(G({name:"",description:"",categoryId:"",version:"1.0.0",tags:"",metadata:"{}",isPublic:!0})),C=I(G({name:"",description:"",parentId:""}));Ue(async()=>{try{v(W,await Ze.getCurrentUser(),!0),a(W)&&await Z()}catch(n){console.error("Error loading admin data:",n)}finally{v(de,!1)}});async function Z(){try{const j=await(await fetch("/api/datasets")).json();v(X,j.data||[],!0);const ee=await(await fetch("/api/categories")).json();v(B,ee.data||[],!0)}catch(n){console.error("Error loading data:",n)}}async function ke(){try{(await fetch("/api/datasets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a(g),tags:a(g).tags?a(g).tags.split(",").map(j=>j.trim()):[],metadata:JSON.parse(a(g).metadata)})})).ok&&(await Z(),v(U,!1),v(g,{name:"",description:"",categoryId:"",version:"1.0.0",tags:"",metadata:"{}",isPublic:!0},!0))}catch(n){console.error("Error creating dataset:",n)}}async function Ce(){try{v(A,""),v(R,"");const n=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a(C),parentId:a(C).parentId?parseInt(a(C).parentId):null})}),j=await n.json();n.ok?(v(R,"Category created successfully!"),await Z(),v(F,!1),v(C,{name:"",description:"",parentId:""},!0),setTimeout(()=>{v(R,"")},3e3)):(v(A,j.error||"Failed to create category",!0),setTimeout(()=>{v(A,"")},5e3))}catch(n){console.error("Error creating category:",n),v(A,"An unexpected error occurred")}}var $=xt();Ye(n=>{Ke.title="Admin - EzeData"});var ne=t($),je=t(ne);{var De=n=>{var j=$e();u(n,j)},Ie=n=>{var j=Qe(),le=_e(j);{var ee=E=>{var Y=et();u(E,Y)},Pe=E=>{var Y=bt(),ve=r(_e(Y),2);{var Ne=s=>{var o=tt(),f=t(o),i=r(t(f),2),d=r(t(i),2),l=t(d),c=t(l,!0);e(l),e(d),e(i),e(f),e(o),L(()=>k(c,a(A))),u(s,o)};S(ve,s=>{a(A)&&s(Ne)})}var ce=r(ve,2);{var ze=s=>{var o=at(),f=t(o),i=r(t(f),2),d=r(t(i),2),l=t(d),c=t(l,!0);e(l),e(d),e(i),e(f),e(o),L(()=>k(c,a(R))),u(s,o)};S(ce,s=>{a(R)&&s(ze)})}var te=r(ce,2),ae=t(te),re=t(ae),ue=t(re),Se=r(t(ue),2);Se.__click=[rt,U],e(ue),e(re);var pe=r(re,2),Me=t(pe);{var Te=s=>{var o=st();u(s,o)},Ae=s=>{var o=it();K(o,21,()=>a(X),Q,(f,i)=>{var d=ot(),l=t(d),c=t(l),x=t(c),D=t(x,!0);e(x);var _=r(x,2),y=t(_,!0);e(_);var h=r(_,2),M=t(h),z=t(M,!0);e(M);var T=r(M,2),b=t(T);e(T),e(h),e(c);var N=r(c,2),w=t(N),q=t(w,!0);e(w),e(N),e(l),e(d),L(()=>{k(D,a(i).name),k(y,a(i).description),k(z,a(i).category?.name||"Uncategorized"),k(b,`v${a(i).version??""}`),We(w,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a(i).isPublic?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),k(q,a(i).isPublic?"Public":"Private")}),u(f,d)}),e(o),u(s,o)};S(Me,s=>{a(X).length===0?s(Te):s(Ae,!1)})}e(pe),e(ae);var me=r(ae,2),se=t(me),ge=t(se),Ee=r(t(ge),2);Ee.__click=[dt,F],e(ge),e(se);var fe=r(se,2),Le=t(fe);{var Oe=s=>{var o=nt();u(s,o)},Be=s=>{var o=vt();K(o,21,()=>a(B),Q,(f,i)=>{var d=lt(),l=t(d),c=t(l),x=t(c,!0);e(c);var D=r(c,2),_=t(D,!0);e(D),e(l);var y=r(l,2),h=t(y);e(y),e(d),L(()=>{k(x,a(i).name),k(_,a(i).description),k(h,`${a(i).datasetCount??""} datasets`)}),u(f,d)}),e(o),u(s,o)};S(Le,s=>{a(B).length===0?s(Oe):s(Be,!1)})}e(fe),e(me),e(te);var be=r(te,2);{var Re=s=>{var o=pt(),f=t(o),i=t(f),d=r(t(i),2),l=t(d),c=r(t(l),2);V(c),e(l);var x=r(l,2),D=r(t(x),2);ye(D),e(x);var _=r(x,2),y=r(t(_),2),h=t(y);h.value=h.__value="";var M=r(h);K(M,17,()=>a(B),Q,(p,oe)=>{var J=ct(),He=t(J,!0);e(J);var xe={};L(()=>{k(He,a(oe).name),xe!==(xe=a(oe).id)&&(J.value=(J.__value=a(oe).id)??"")}),u(p,J)}),e(y),e(_);var z=r(_,2),T=r(t(z),2);V(T),e(z);var b=r(z,2),N=t(b);V(N),ie(2),e(b);var w=r(b,2),q=t(w);q.__click=[ut,U],ie(2),e(w),e(d),e(i),e(f),e(o),he("submit",d,p=>{p.preventDefault(),ke()}),H(c,()=>a(g).name,p=>a(g).name=p),H(D,()=>a(g).description,p=>a(g).description=p),we(y,()=>a(g).categoryId,p=>a(g).categoryId=p),H(T,()=>a(g).tags,p=>a(g).tags=p),Xe(N,()=>a(g).isPublic,p=>a(g).isPublic=p),u(s,o)};S(be,s=>{a(U)&&s(Re)})}var qe=r(be,2);{var Je=s=>{var o=ft(),f=t(o),i=t(f),d=r(t(i),2),l=t(d),c=r(t(l),2);V(c),e(l);var x=r(l,2),D=r(t(x),2);ye(D),e(x);var _=r(x,2),y=r(t(_),2),h=t(y);h.value=h.__value="";var M=r(h);K(M,17,()=>a(B),Q,(b,N)=>{var w=mt(),q=t(w,!0);e(w);var p={};L(()=>{k(q,a(N).name),p!==(p=a(N).id)&&(w.value=(w.__value=a(N).id)??"")}),u(b,w)}),e(y),e(_);var z=r(_,2),T=t(z);T.__click=[gt,F],ie(2),e(z),e(d),e(i),e(f),e(o),he("submit",d,b=>{b.preventDefault(),Ce()}),H(c,()=>a(C).name,b=>a(C).name=b),H(D,()=>a(C).description,b=>a(C).description=b),we(y,()=>a(C).parentId,b=>a(C).parentId=b),u(s,o)};S(qe,s=>{a(F)&&s(Je)})}u(E,Y)};S(le,E=>{a(W)?E(Pe,!1):E(ee)},!0)}u(n,j)};S(je,n=>{a(de)?n(De):n(Ie,!1)})}e(ne),e($),u(O,$),Ge()}Ve(["click"]);export{zt as component};
